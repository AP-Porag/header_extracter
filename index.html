<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Header Extracter</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">-->
<!--</head>-->
<!--<body>-->
<!--<div class="text-center">-->
<!--    <h1 class="text-center text-primary mt-4">Header Extracter</h1>-->
<!--    <input type="file" id="fileInput" accept=".txt" class="mt-5"/>-->

<!--    <div id="result" class="mt-5 text-center p-3" style="width: 50%; height: 400px; margin: auto;">-->
<!--        <h4 class="text-dark" style="display: none;" id="headerTitle">Extracted Headers</h4>-->
<!--        <p class="text-dark mb-2" style="display: none;" id="fileNameP">File Name: <span id="fileNameSpan"></span></p>-->
<!--        <p class="text-dark mb-3" style="display: none;" id="totalHeadersCount">Total Headers: <span id="totalHeaders"></span></p>-->
<!--        <h5 id="headers" class="text-info text-center text-lg">Headers will be shown here after extraction.</h5>-->
<!--    </div>-->
<!--</div>-->



<!--&lt;!&ndash;script start&ndash;&gt;-->
<!--<script>-->
<!--    document.getElementById('fileInput').addEventListener('change', function (e) {-->
<!--        const file = e.target.files[0];-->
<!--        if (!file) return;-->

<!--        const reader = new FileReader();-->

<!--        reader.onload = function (event) {-->
<!--            const text = event.target.result;-->

<!--            // Get only first line-->
<!--            const firstLine = text.split(/\r?\n/)[0];-->

<!--            // Convert TSV to CSV-style output-->
<!--            const headers = firstLine.split('\t').join(', ');-->

<!--            // console.log(headers);-->
<!--            // alert(headers);-->

<!--            // to show in body-->
<!--            const paragraph = document.getElementById("headers");-->

<!--            // Assign the new string to the textContent property-->
<!--            document.getElementById("headerTitle").style.display = "block";-->
<!--            document.getElementById("totalHeadersCount").style.display = "block";-->
<!--            document.getElementById("fileNameP").style.display = "block";-->
<!--            document.getElementById("fileNameSpan").textContent = file.name;-->
<!--            document.getElementById("totalHeaders").textContent = headers.split(',').length;-->
<!--            paragraph.classList.remove('text-info')-->
<!--            paragraph.classList.add('text-dark')-->
<!--            paragraph.textContent = headers;-->
<!--        };-->

<!--        // Read only first 64KB (enough for header line)-->
<!--        const blob = file.slice(0, 64 * 1024);-->
<!--        reader.readAsText(blob);-->
<!--    });-->
<!--</script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>-->
<!--&lt;!&ndash;script end&ndash;&gt;-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Header Extractor</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-4">
    <h1 class="text-center text-primary mb-4">Header Extractor</h1>

    <div class="text-center mb-4">
        <input type="file" id="fileInput" accept=".txt" multiple class="form-control w-50 mx-auto"/>
    </div>

    <div id="cardsContainer" class="row g-4"></div>
</div>

<script>
    document.getElementById('fileInput').addEventListener('change', function (e) {
        const files = Array.from(e.target.files);
        const container = document.getElementById('cardsContainer');

        container.innerHTML = ''; // reset on new upload

        files.forEach((file, index) => {
            const reader = new FileReader();

            reader.onload = function (event) {
                const text = event.target.result;
                const firstLine = text.split(/\r?\n/)[0];
                const headers = firstLine.split('\t').join(', ');
                const headerCount = headers.split(',').length;

                const cardId = `headers-${index}`;

                const cardHTML = `
                <div class="col-md-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-primary">${file.name}</h5>

                            <p class="mb-1"><strong>Total Headers:</strong> ${headerCount}</p>

                            <textarea id="${cardId}" class="form-control mb-3" rows="5" readonly>${headers}</textarea>

                            <button class="btn btn-outline-primary mt-auto copy-btn" data-target="${cardId}">
                                Copy Headers
                            </button>
                        </div>
                    </div>
                </div>
            `;

                container.insertAdjacentHTML('beforeend', cardHTML);
            };

            // read only first 64KB
            const blob = file.slice(0, 64 * 1024);
            reader.readAsText(blob);
        });
    });

    // Copy button handler (event delegation)
    document.addEventListener('click', function (e) {
        if (e.target.classList.contains('copy-btn')) {
            const targetId = e.target.getAttribute('data-target');
            const text = document.getElementById(targetId).value;

            navigator.clipboard.writeText(text).then(() => {
                e.target.textContent = 'Copied';
                e.target.classList.remove('btn-outline-primary');
                e.target.classList.add('btn-success');
                e.target.disabled = true;

                // setTimeout(() => {
                //     e.target.textContent = 'Copy Headers';
                //     e.target.classList.remove('btn-success');
                //     e.target.classList.add('btn-outline-primary');
                // }, 2000);
            });
        }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

